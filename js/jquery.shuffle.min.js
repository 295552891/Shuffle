// IMPORTANT!
// If you're already using Modernizr, delete it from this file. If you don't know what Modernizr is, leave it :)

/* Modernizr 2.0.6 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-csstransforms-csstransforms3d-csstransitions-cssclasses-teststyles-testprop-testallprops-prefixes-domprefixes
 */
;window.Modernizr=function(a,b,c){function C(a,b){var c=a.charAt(0).toUpperCase()+a.substr(1),d=(a+" "+o.join(c+" ")+c).split(" ");return B(d,b)}function B(a,b){for(var d in a)if(k[a[d]]!==c)return b=="pfx"?a[d]:!0;return!1}function A(a,b){return!!~(""+a).indexOf(b)}function z(a,b){return typeof a===b}function y(a,b){return x(n.join(a+";")+(b||""))}function x(a){k.cssText=a}var d="2.0.6",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l,m=Object.prototype.toString,n=" -webkit- -moz- -o- -ms- -khtml- ".split(" "),o="Webkit Moz O ms Khtml".split(" "),p={},q={},r={},s=[],t=function(a,c,d,e){var f,h,j,k=b.createElement("div");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:i+(d+1),k.appendChild(j);f=["&shy;","<style>",a,"</style>"].join(""),k.id=i,k.innerHTML+=f,g.appendChild(k),h=c(k,a),k.parentNode.removeChild(k);return!!h},u,v={}.hasOwnProperty,w;!z(v,c)&&!z(v.call,c)?w=function(a,b){return v.call(a,b)}:w=function(a,b){return b in a&&z(a.constructor.prototype[b],c)};var D=function(a,c){var d=a.join(""),f=c.length;t(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.csstransforms3d=i.csstransforms3d.offsetLeft===9},f,c)}([,["@media (",n.join("transform-3d),("),i,")","{#csstransforms3d{left:9px;position:absolute}}"].join("")],[,"csstransforms3d"]);p.csstransforms=function(){return!!B(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"])},p.csstransforms3d=function(){var a=!!B(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);a&&"webkitPerspective"in g.style&&(a=e.csstransforms3d);return a},p.csstransitions=function(){return C("transitionProperty")};for(var E in p)w(p,E)&&(u=E.toLowerCase(),e[u]=p[E](),s.push((e[u]?"":"no-")+u));x(""),j=l=null,e._version=d,e._prefixes=n,e._domPrefixes=o,e.testProp=function(a){return B([a])},e.testAllProps=C,e.testStyles=t,g.className=g.className.replace(/\bno-js\b/,"")+(f?" js "+s.join(" "):"");return e}(this,this.document);

/**
 * jQuery Shuffle Plugin
 * Uses CSS Transforms to filter down a grid of items (degrades to jQuery's animate).
 * Inspired by Isotope http://isotope.metafizzy.co/
 * Copyright (c) 2011 Glen Cheney cheney [dot] glen [at] gmail [dot] com http://glencheney.com
 * @author Glen Cheney
 * @version 1.2
 * @date 12.15.11
 */
 
 (function(a){var b={shrink:function(){var c=a(this).find(".concealed");if(c.length===0){return}c.each(function(){var c=a(this),d=parseInt(c.attr("data-x")),e=parseInt(c.attr("data-y")),f=c.parent().data("shuffle"),g,h,i;if(!d)d=0;if(!e)e=0;if(Modernizr.csstransforms&&Modernizr.csstransitions){if(Modernizr.csstransforms3d){g="translate3d("+d+"px, "+e+"px, 0px) scale3d(0.001, 0.001, 1)"}else{g="translate("+d+"px, "+e+"px) scale(0.001)"}b.setPrefixedCss(c,"transform",g)}else{h=d+f.itemWidth/2;i=e+f.itemHeight/2;c.animate({left:h+"px",top:i+"px",opacity:0,height:"0px",width:"0px"},800,"swing")}})},filter:function(c){var d=0,e=a(this).find(".filtered");e.each(function(e){var f=a(this),g=f.parent().data("shuffle"),h=e%g.itemsPerRow*(c.itemWidth+c.margins),i=Math.floor(e/g.itemsPerRow),j;if(e%g.itemsPerRow==0){d=i*(g.itemHeight+c.margins)}f.attr({"data-x":h,"data-y":d});if(Modernizr.csstransforms&&Modernizr.csstransitions){if(Modernizr.csstransforms3d){j="translate3d("+h+"px, "+d+"px, 0px) scale3d(1, 1, 1)"}else{j="translate("+h+"px, "+d+"px) scale(1, 1)"}b.setPrefixedCss(f,"transform",j)}else{f.animate({left:h+"px",top:d+"px",opacity:1,height:g.itemHeight+"px",width:g.itemWidth+"px"},800,"swing")}})},setPrefixedCss:function(a,b,c){a.css(Modernizr.testAllProps(b,"pfx"),c)}};a.fn.shuffle=function(c){var d={itemWidth:230,margins:20,key:"all"};return this.each(function(){if(c){a.extend(d,c)}var e=a(this),f,g,h=e.data("shuffle");if(!h){var i=e.children(),j=Math.floor(e.width()/d.itemWidth),k=i.first().outerHeight();h={$items:i,itemsPerRow:j,itemHeight:k,itemWidth:d.itemWidth,margins:d.margins};e.data("shuffle",h);if(!Modernizr.csstransforms||!Modernizr.csstransitions){b.setPrefixedCss(i,"transition","none")}}if(d.key=="all"){h.$items.removeClass("concealed")}else{h.$items.removeClass("concealed filtered").each(function(){var b=a(this).attr("data-key"),c=a.parseJSON(b);if(a.inArray(d.key,c)===-1){a(this).addClass("concealed")}})}b.shrink.call(this,d);f=h.$items.not(".concealed").addClass("filtered").length;b.filter.call(this,d);g=Math.ceil(f/h.itemsPerRow)*(h.itemHeight+d.margins)-d.margins;e.css("height",g+"px")})}})(jQuery)