/*!
 * Shuffle.js by @Vestride
 * Categorize, sort, and filter a responsive grid of items.
 * Dependencies: jQuery 1.9+, Modernizr 2.6.2+
 * @license MIT license
 * @version 2.1.1
 */
window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.2",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={},y=[],z=y.slice,A=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:q+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',q,'">',a,"</style>"].join(""),j.id=q,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=p.style.overflow,p.style.overflow="hidden",p.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),p.style.overflow=i),!!g},B={}.hasOwnProperty;l=e(B,"undefined")||e(B.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return B.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.csstransforms=function(){return!!i("transform")},x.csstransforms3d=function(){var a=!!i("perspective");return a&&"webkitPerspective"in p.style&&A("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},x.csstransitions=function(){return i("transition")};for(var C in x)l(x,C)&&(k=C.toLowerCase(),n[k]=x[C](),y.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),r=j=null,n._version=m,n._prefixes=t,n._domPrefixes=w,n._cssomPrefixes=v,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=A,n.prefixed=function(a,b,c){return b?i(a,b,c):i(a,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" js "+y.join(" "):""),n}(this,this.document),function(a){"function"==typeof define&&define.amd?define(["jquery","modernizr"],a):a(window.$,window.Modernizr)}(function(a,b,c){"use strict";function d(a){return a?a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-"):""}function e(b,c,d){var e,f,g,h=null,i=0;d=d||{};var j=function(){i=d.leading===!1?0:a.now(),h=null,g=b.apply(e,f),e=f=null};return function(){var k=a.now();i||d.leading!==!1||(i=k);var l=c-(k-i);return e=this,f=arguments,0>=l||l>c?(clearTimeout(h),h=null,i=k,g=b.apply(e,f),e=f=null):h||d.trailing===!1||(h=setTimeout(j,l)),g}}function f(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)==={})return}function g(b,c,d){return setTimeout(a.proxy(b,c),d||0)}function h(a){var b,c,d=a.length;if(!d)return a;for(;--d;)c=Math.floor(Math.random()*(d+1)),b=a[c],a[c]=a[d],a[d]=b;return a}if("object"!=typeof b)throw new Error("Shuffle.js requires Modernizr.\nhttp://vestride.github.io/Shuffle/#dependencies");var i=b.prefixed("transition"),j=b.prefixed("transitionDelay"),k=b.prefixed("transitionDuration"),l={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[i],m=b.prefixed("transform"),n=d(m),o=b.csstransforms&&b.csstransitions,p=b.csstransforms3d,q="shuffle",r="all",s="groups",t=1,u=.001,v=0,w=a(window),x=function(b,c){c=c||{},a.extend(this,x.options,c,x.settings),this.$el=a(b),this.element=b,this.unique="shuffle_"+v++,this._fire(x.EventType.LOADING),this._init(),g(function(){this.initialized=!0,this._fire(x.EventType.DONE)},this,16)};return x.EventType={LOADING:"loading",DONE:"done",SORTED:"sorted",LAYOUT:"layout",REMOVED:"removed"},x.ClassName={BASE:q,SHUFFLE_ITEM:"shuffle-item",FILTERED:"filtered",CONCEALED:"concealed"},x._getItemTransformString=function(a,b,c){return p?"translate3d("+a+"px, "+b+"px, 0) scale3d("+c+", "+c+", 1)":"translate("+a+"px, "+b+"px) scale("+c+", "+c+")"},x._getPreciseDimension=function(b,c){var d;return d=window.getComputedStyle?window.getComputedStyle(b,null)[c]:a(b).css(c),parseFloat(d)},x._getOuterWidth=function(b,c){var d=b.offsetWidth;if(c){var e=a(b).css(["marginLeft","marginRight"]),f=parseFloat(e.marginLeft)||0,g=parseFloat(e.marginRight)||0;d+=f+g}return d},x._getOuterHeight=function(b,c){var d=b.offsetHeight;if(c){var e=a(b).css(["marginTop","marginBottom"]),f=parseFloat(e.marginTop)||0,g=parseFloat(e.marginBottom)||0;d+=f+g}return d},x._skipTransition=function(a,b,c){var d=a.style[k];a.style[k]="0ms",b.call(c);var e=a.offsetWidth;e=null,a.style[k]=d},x.prototype._init=function(){this.$items=this._getItems(),this.sizer=this._getElementOption(this.sizer),this.sizer&&(this.useSizer=!0),this.$el.addClass(x.ClassName.BASE),this._initItems(),w.on("resize."+q+"."+this.unique,this._getResizeFunction());var a=this.$el.css(["paddingLeft","paddingRight","position"]),b=x._getOuterWidth(this.element);"static"===a.position&&(this.element.style.position="relative"),this.offset={left:parseInt(a.paddingLeft,10)||0,top:parseInt(a.paddingTop,10)||0},this._setColumns(parseInt(b,10)),this.shuffle(this.group,this.initialSort),this.supported&&g(function(){this._setTransitions(),this.element.style[i]="height "+this.speed+"ms "+this.easing},this)},x.prototype._getResizeFunction=function(){var b=a.proxy(this._onResize,this);return this.throttle?this.throttle(b,this.throttleTime):b},x.prototype._getElementOption=function(a){return"string"==typeof a?this.$el.find(a)[0]||null:a&&a.nodeType&&1===a.nodeType?a:a&&a.jquery?a[0]:null},x.prototype._filter=function(a,b){a=a||this.lastFilter,b=b||this.$items;var c=this._getFilteredSets(a,b);return this._toggleFilterClasses(c.filtered,c.concealed),this.lastFilter=a,"string"==typeof a&&(this.group=a),c.filtered},x.prototype._getFilteredSets=function(b,c){var d=a(),e=a();return b===r?d=c:f(c,function(c){var f=a(c);this._doesPassFilter(b,f)?d=d.add(f):e=e.add(f)},this),{filtered:d,concealed:e}},x.prototype._doesPassFilter=function(b,c){if(a.isFunction(b))return b.call(c[0],c,this);var d=c.data(s),e=this.delimeter&&!a.isArray(d)?d.split(this.delimeter):d;return a.inArray(b,e)>-1},x.prototype._toggleFilterClasses=function(a,b){a.removeClass(x.ClassName.CONCEALED).addClass(x.ClassName.FILTERED),b.removeClass(x.ClassName.FILTERED).addClass(x.ClassName.CONCEALED)},x.prototype._initItems=function(a){a=a||this.$items,a.addClass([x.ClassName.SHUFFLE_ITEM,x.ClassName.FILTERED].join(" ")),a.css(this.itemCss).data("position",{x:0,y:0}).data("scale",t)},x.prototype._updateItemCount=function(){this.visibleItems=this._getFilteredItems().length},x.prototype._setTransition=function(a){a.style[i]=n+" "+this.speed+"ms "+this.easing+", opacity "+this.speed+"ms "+this.easing},x.prototype._setTransitions=function(a){a=a||this.$items,f(a,function(a){this._setTransition(a)},this)},x.prototype._setSequentialDelay=function(a){this.supported&&f(a,function(a,b){a.style[j]="0ms,"+(b+1)*this.sequentialFadeDelay+"ms"},this)},x.prototype._getItems=function(){return this.$el.children(this.itemSelector)},x.prototype._getFilteredItems=function(){return this.$items.filter("."+x.ClassName.FILTERED)},x.prototype._getConcealedItems=function(){return this.$items.filter("."+x.ClassName.CONCEALED)},x.prototype._getColumnSize=function(b,c){var d;return d=a.isFunction(this.columnWidth)?this.columnWidth(c):this.useSizer?x._getPreciseDimension(this.sizer,"width"):this.columnWidth?this.columnWidth:this.$items.length>0?x._getOuterWidth(this.$items[0],!0):c,0===d&&(d=c),d+b},x.prototype._getGutterSize=function(b){var c;return c=a.isFunction(this.gutterWidth)?this.gutterWidth(b):this.useSizer?x._getPreciseDimension(this.sizer,"marginLeft"):this.gutterWidth},x.prototype._setColumns=function(a){var b=a||x._getOuterWidth(this.element),c=this._getGutterSize(b),d=this._getColumnSize(c,b),e=(b+c)/d;Math.abs(Math.round(e)-e)<.03&&(e=Math.round(e)),this.cols=Math.max(Math.floor(e),1),this.containerWidth=b,this.colWidth=d},x.prototype._setContainerSize=function(){this.$el.css("height",this._getContainerSize())},x.prototype._getContainerSize=function(){return Math.max.apply(Math,this.colYs)},x.prototype._fire=function(a,b){this.$el.trigger(a+"."+q,b&&b.length?b:[this])},x.prototype._layout=function(b,c){f(b,function(b){var d=a(b),e=d.data(),f=e.position,g=this._getItemPosition(d);if(d.data("position",g),d.data("scale",t),g.x!==f.x||g.y!==f.y||e.scale!==t){var h={$item:d,x:g.x,y:g.y,scale:t,opacity:c?0:1,skipTransition:!!c,callfront:function(){c||d.css("visibility","visible")},callback:function(){c&&d.css("visibility","hidden")}};this.styleQueue.push(h)}},this),this._processStyleQueue(),this._setContainerSize()},x.prototype._resetCols=function(){var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0)},x.prototype._getItemPosition=function(a){var b=x._getOuterWidth(a[0],!0),c=b/this.colWidth;Math.abs(Math.round(c)-c)<.03&&(c=Math.round(c));var d=Math.min(Math.ceil(c),this.cols);if(1===d)return this._placeItem(a,this.colYs);var e,f,g=this.cols+1-d,h=[];for(f=0;g>f;f++)e=this.colYs.slice(f,f+d),h[f]=Math.max.apply(Math,e);return this._placeItem(a,h)},x.prototype._placeItem=function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;f>e;e++)if(b[e]>=c-this.buffer&&b[e]<=c+this.buffer){d=e;break}var g={x:Math.round(this.colWidth*d+this.offset.left),y:Math.round(c+this.offset.top)},h=c+x._getOuterHeight(a[0],!0),i=this.cols+1-f;for(e=0;i>e;e++)this.colYs[d+e]=h;return g},x.prototype._shrink=function(b){var c=b||this._getConcealedItems();f(c,function(b){var c=a(b),d=c.data(),e=d.scale===u;if(!e){c.data("scale",u);var f={$item:c,x:d.position.x,y:d.position.y,scale:u,opacity:0,callback:function(){c.css("visibility","hidden")}};this.styleQueue.push(f)}},this)},x.prototype._onResize=function(){if(this.enabled&&!this.destroyed&&!this.isTransitioning){var a=x._getOuterWidth(this.element);a!==this.containerWidth&&this.update()}},x.prototype._getStylesForTransition=function(a){var b={opacity:a.opacity};return this.supported?a.x!==c&&(b[m]=x._getItemTransformString(a.x,a.y,a.scale)):(b.left=a.x,b.top=a.y),b},x.prototype._transition=function(b){var c=this._getStylesForTransition(b);this._startItemAnimation(b.$item,c,b.callfront||a.noop,b.callback||a.noop)},x.prototype._startItemAnimation=function(b,c,d,e){function f(b){b.target===b.currentTarget&&(a(b.target).off(l,f),e())}if(d(),!this.initialized)return b.css(c),void e();if(this.supported)b.css(c),b.on(l,f);else{var g=b.stop(!0).animate(c,this.speed,"swing",e);this._animations.push(g.promise())}},x.prototype._processStyleQueue=function(b){var c=a();f(this.styleQueue,function(a){a.skipTransition?this._styleImmediately(a):(c=c.add(a.$item),this._transition(a))},this),c.length>0&&this.initialized?(this.isTransitioning=!0,this.supported?this._whenCollectionDone(c,l,this._movementFinished):this._whenAnimationsDone(this._movementFinished)):b||g(this._layoutEnd,this),this.styleQueue.length=0},x.prototype._styleImmediately=function(a){x._skipTransition(a.$item[0],function(){a.$item.css(this._getStylesForTransition(a))},this)},x.prototype._movementFinished=function(){this.isTransitioning=!1,this._layoutEnd()},x.prototype._layoutEnd=function(){this._fire(x.EventType.LAYOUT)},x.prototype._addItems=function(a,b,c){this._initItems(a),this._setTransitions(a),this.$items=this._getItems(),this._shrink(a),f(this.styleQueue,function(a){a.skipTransition=!0}),this._processStyleQueue(!0),b?this._addItemsToEnd(a,c):this.shuffle(this.lastFilter)},x.prototype._addItemsToEnd=function(a,b){var c=this._filter(null,a),d=c.get();this._updateItemCount(),this._layout(d,!0),b&&this.supported&&this._setSequentialDelay(d),this._revealAppended(d)},x.prototype._revealAppended=function(b){g(function(){f(b,function(b){this._transition({$item:a(b),opacity:1,scale:t})},this),this._whenCollectionDone(a(b),l,function(){a(b).css(j,"0ms"),this._movementFinished()})},this,this.revealAppendedDelay)},x.prototype._whenCollectionDone=function(b,c,d){function e(b){b.target===b.currentTarget&&(a(b.target).off(c,e),f++,f===g&&d.call(h))}var f=0,g=b.length,h=this;b.on(c,e)},x.prototype._whenAnimationsDone=function(b){a.when.apply(null,this._animations).always(a.proxy(function(){this._animations.length=0,b.call(this)},this))},x.prototype.shuffle=function(a,b){this.enabled&&!this.isTransitioning&&(a||(a=r),this._filter(a),this._updateItemCount(),this._shrink(),this.sort(b))},x.prototype.sort=function(a){if(this.enabled&&!this.isTransitioning){this._resetCols();var b=a||this.lastSort,c=this._getFilteredItems().sorted(b);this._layout(c),this.lastSort=a}},x.prototype.update=function(a){this.enabled&&!this.isTransitioning&&(a||this._setColumns(),this.sort())},x.prototype.layout=function(){this.update(!0)},x.prototype.appended=function(a,b,c){this._addItems(a,b===!0,c!==!1)},x.prototype.disable=function(){this.enabled=!1},x.prototype.enable=function(a){this.enabled=!0,a!==!1&&this.update()},x.prototype.remove=function(b){function c(){b.remove(),this.$items=this._getItems(),this._updateItemCount(),this._fire(x.EventType.REMOVED,[b,this]),b=null}b.length&&b.jquery&&(this._toggleFilterClasses(a(),b),this._shrink(b),this.sort(),this.$el.one(x.EventType.LAYOUT+"."+q,a.proxy(c,this)))},x.prototype.destroy=function(){w.off("."+this.unique),this.$el.removeClass(q).removeAttr("style").removeData(q),this.$items.removeAttr("style").removeData("position").removeData("scale").removeClass([x.ClassName.CONCEALED,x.ClassName.FILTERED,x.ClassName.SHUFFLE_ITEM].join(" ")),this.$items=null,this.$el=null,this.sizer=null,this.element=null,this.destroyed=!0},x.options={group:r,speed:250,easing:"ease-out",itemSelector:"",sizer:null,gutterWidth:0,columnWidth:0,delimeter:null,buffer:0,initialSort:null,throttle:e,throttleTime:300,sequentialFadeDelay:150,supported:o},x.settings={useSizer:!1,itemCss:{position:"absolute",top:0,left:0,visibility:"visible"},offset:{top:0,left:0},revealAppendedDelay:300,lastSort:{},lastFilter:r,enabled:!0,destroyed:!1,initialized:!1,_animations:[],styleQueue:[]},a.fn.shuffle=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),e=d.data(q);e?"string"==typeof b&&e[b]&&e[b].apply(e,c):(e=new x(this,b),d.data(q,e))})},a.fn.sorted=function(b){var d=a.extend({},a.fn.sorted.defaults,b),e=this.get(),f=!1;return e.length?d.randomize?h(e):(a.isFunction(d.by)&&e.sort(function(b,e){if(f)return 0;var g=d.by(a(b)),h=d.by(a(e));return g===c&&h===c?(f=!0,0):h>g||"sortFirst"===g||"sortLast"===h?-1:g>h||"sortLast"===g||"sortFirst"===h?1:0}),f?this.get():(d.reverse&&e.reverse(),e)):[]},a.fn.sorted.defaults={reverse:!1,by:null,randomize:!1},x});